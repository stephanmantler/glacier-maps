(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{107:function(t,e,n){"use strict";var i=n(45),o=n(90),r=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new i.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:o.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();e.a=r},118:function(t,e){var n=null,i=null;function o(t,e,n){t.addEventListener(e,(function(t){var o=new MouseEvent(n,t);o.pointerId=1,o.isPrimary=!0,o.pointerType="mouse",o.width=1,o.height=1,o.tiltX=0,o.tiltY=0,"buttons"in t&&0!==t.buttons?o.pressure=.5:o.pressure=0;var r=t.target;null!==i&&(r=i,"mouseup"===e&&(i=null)),r.dispatchEvent(o),o.defaultPrevented&&t.preventDefault()}))}function r(t,e,i){t.addEventListener(e,(function(t){for(var o=t.changedTouches,r=o.length,a=0;a<r;a++){var s=new CustomEvent(i,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var l=o.item(a);s.clientX=l.clientX,s.clientY=l.clientY,s.screenX=l.screenX,s.screenY=l.screenY,s.pageX=l.pageX,s.pageY=l.pageY;var h=l.target.getBoundingClientRect();s.offsetX=l.clientX-h.left,s.offsetY=l.clientY-h.top,s.pointerId=1+l.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===n&&(n=l.identifier),s.isPrimary=l.identifier===n,"touchend"===e&&s.isPrimary&&(n=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(o(document,"mousedown","pointerdown"),o(document,"mousemove","pointermove"),o(document,"mouseup","pointerup")),r(document,"touchstart","pointerdown"),r(document,"touchmove","pointermove"),r(document,"touchend","pointerup"))},120:function(t,e,n){"use strict";n.r(e),n.d(e,"AssertionError",(function(){return o.a})),n.d(e,"Collection",(function(){return r.a})),n.d(e,"Disposable",(function(){return a.a})),n.d(e,"Feature",(function(){return s.a})),n.d(e,"Geolocation",(function(){return C})),n.d(e,"Graticule",(function(){return gt})),n.d(e,"Image",(function(){return vt.a})),n.d(e,"ImageBase",(function(){return yt.a})),n.d(e,"ImageCanvas",(function(){return Et})),n.d(e,"ImageTile",(function(){return Ot.a})),n.d(e,"Kinetic",(function(){return xt})),n.d(e,"Map",(function(){return Cn})),n.d(e,"MapBrowserEvent",(function(){return jt})),n.d(e,"MapBrowserEventHandler",(function(){return Ft})),n.d(e,"MapBrowserPointerEvent",(function(){return It})),n.d(e,"MapEvent",(function(){return Pt})),n.d(e,"Object",(function(){return l.a})),n.d(e,"Observable",(function(){return jn.default})),n.d(e,"Overlay",(function(){return Bn})),n.d(e,"PluggableMap",(function(){return _e})),n.d(e,"Tile",(function(){return Xn.a})),n.d(e,"TileCache",(function(){return Yn.a})),n.d(e,"TileQueue",(function(){return Xt})),n.d(e,"TileRange",(function(){return Zn.b})),n.d(e,"VectorRenderTile",(function(){return Wn})),n.d(e,"VectorTile",(function(){return Qn})),n.d(e,"View",(function(){return he})),n.d(e,"getUid",(function(){return S.c})),n.d(e,"VERSION",(function(){return S.a}));var i,o=n(65),r=n(56),a=n(79),s=n(81),l=n(18),h=n(33),u=n(10),c=n(60),p=n(5),d=n(4),_=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f="accuracy",g="accuracyGeometry",v="altitude",y="altitudeAccuracy",m="heading",b="position",E="projection",O="speed",x="tracking",w="trackingOptions",P=function(t){function e(e){var n=t.call(this,u.a.ERROR)||this;return n.code=e.code,n.message=e.message,n}return _(e,t),e}(h.a),C=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.position_=null,n.transform_=d.k,n.watchId_=void 0,n.addEventListener(Object(l.b)(E),n.handleProjectionChanged_),n.addEventListener(Object(l.b)(x),n.handleTrackingChanged_),void 0!==i.projection&&n.setProjection(i.projection),void 0!==i.trackingOptions&&n.setTrackingOptions(i.trackingOptions),n.setTracking(void 0!==i.tracking&&i.tracking),n}return _(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Object(d.i)(Object(d.f)("EPSG:4326"),t),this.position_&&this.set(b,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(f,e.accuracy),this.set(v,null===e.altitude?void 0:e.altitude),this.set(y,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(m,null===e.heading?void 0:Object(p.i)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(b,n),this.set(O,null===e.speed?void 0:e.speed);var i=Object(c.a)(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set(g,i),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new P(t))},e.prototype.getAccuracy=function(){return this.get(f)},e.prototype.getAccuracyGeometry=function(){return this.get(g)||null},e.prototype.getAltitude=function(){return this.get(v)},e.prototype.getAltitudeAccuracy=function(){return this.get(y)},e.prototype.getHeading=function(){return this.get(m)},e.prototype.getPosition=function(){return this.get(b)},e.prototype.getProjection=function(){return this.get(E)},e.prototype.getSpeed=function(){return this.get(O)},e.prototype.getTracking=function(){return this.get(x)},e.prototype.getTrackingOptions=function(){return this.get(w)},e.prototype.setProjection=function(t){this.set(E,Object(d.f)(t))},e.prototype.setTracking=function(t){this.set(x,t)},e.prototype.setTrackingOptions=function(t){this.set(w,t)},e}(l.a),j=n(77),R=n(12),L=n(78),I=n(107),T=n(45),A=n(42),M=n(62),S=n(2),F=n(39),D=n(57),k=n(6),N=n(11),K=n(9),V=n(0),G=n(37),z=n(92),B=!1;function X(t,e){return function(t,e,n,i){return function(o,r,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(o,r,a):t,!0),e.getType()==z.a.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=B,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r=e.getType(),l=void 0;r==z.a.JSON||r==z.a.TEXT?l=s.responseText:r==z.a.XML?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):r==z.a.ARRAY_BUFFER&&(l=s.response),l?n.call(this,e.readFeatures(l,{extent:o,featureProjection:a}),e.readProjection(l)):i.call(this)}else i.call(this)}.bind(this),s.onerror=function(){i.call(this)}.bind(this),s.send()}}(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),G.c)}function Y(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Z=n(86),H=n(38),U="addfeature",W="changefeature",q="clear",Q="removefeature",J=n(89),$=n.n(J),tt=function(){function t(t){this.rbush_=new $.a(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(S.c)(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,o=e.length;i<o;i++){var r=t[i],a=e[i],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:a};n[i]=s,this.items_[Object(S.c)(a)]=s}this.rbush_.load(n)},t.prototype.remove=function(t){var e=Object(S.c)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[Object(S.c)(e)],i=[n.minX,n.minY,n.maxX,n.maxY];Object(V.q)(i,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var n,i=0,o=t.length;i<o;i++)if(n=e(t[i]))return n;return n},t.prototype.isEmpty=function(){return Object(R.d)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(V.l)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),nt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.feature=n,i}return et(e,t),e}(h.a),it=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,{attributions:i.attributions,projection:void 0,state:H.a.READY,wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=G.c,n.format_=i.format,n.overlaps_=void 0===i.overlaps||i.overlaps,n.url_=i.url,void 0!==i.loader?n.loader_=i.loader:void 0!==n.url_&&(Object(N.a)(n.format_,7),n.loader_=X(n.url_,n.format_)),n.strategy_=void 0!==i.strategy?i.strategy:Y;var o,a,s=void 0===i.useSpatialIndex||i.useSpatialIndex;return n.featuresRtree_=s?new tt:null,n.loadedExtentsRtree_=new tt,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(i.features)?a=i.features:i.features&&(a=(o=i.features).getArray()),s||void 0!==o||(o=new r.a(a)),void 0!==a&&n.addFeaturesInternal(a),void 0!==o&&n.bindFeaturesCollection_(o),n}return et(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(S.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new nt(U,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(K.a)(e,u.a.CHANGE,this.handleFeatureChange_,this),Object(K.a)(e,D.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i&&(i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e),n&&(Object(N.a)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],i=[],o=0,r=t.length;o<r;o++){var a=t[o],s=Object(S.c)(a);this.addToIndex_(s,a)&&n.push(a)}o=0;for(var l=n.length;o<l;o++){a=n[o],s=Object(S.c)(a);this.setupChangeEvents_(s,a);var h=a.getGeometry();if(h){var u=h.getExtent();e.push(u),i.push(a)}else this.nullGeometryFeatures_[s]=a}this.featuresRtree_&&this.featuresRtree_.load(e,i);o=0;for(var c=n.length;o<c;o++)this.dispatchEvent(new nt(U,n[o]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(U,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(Q,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(F.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(F.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(K.c)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new nt(q);this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var i=e(n);if(i)return i}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(R.d)(this.nullGeometryFeatures_)||Object(k.c)(t,Object(R.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],i=t[1],o=null,r=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||G.b;return this.featuresRtree_.forEachInExtent(s,(function(t){if(l(t)){var e=t.getGeometry(),h=a;if((a=e.closestPointXY(n,i,r,a))<h){o=t;var u=Math.sqrt(a);s[0]=n-u,s[1]=i-u,s[2]=n+u,s[3]=i+u}}})),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(S.c)(e),i=e.getGeometry();if(i){var o=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var r=e.getId();if(void 0!==r){var a=r.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new nt(W,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(S.c)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(R.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var i=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var r=function(t,r){var s=o[t];i.forEachInExtent(s,(function(t){return Object(V.h)(t.extent,s)}))||(a.loader_.call(a,s,e,n),i.insert(s,{extent:s.slice()}),a.loading=a.loader_!==G.c)},a=this,s=0,l=o.length;s<l;++s)r(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(Object(V.q)(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=Object(S.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(S.c)(t);this.featureChangeKeys_[e].forEach(K.c),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new nt(Q,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Object(N.a)(this.format_,7),this.setLoader(X(t,this.format_))},e}(Z.a),ot=n(53);function rt(t,e,n){for(var i,o,r,a,s,l,h=[],u=t(0),c=t(1),d=e(u),_=e(c),f=[c,u],g=[_,d],v=[1,0],y={},m=1e5;--m>0&&v.length>0;)r=v.pop(),u=f.pop(),d=g.pop(),(l=r.toString())in y||(h.push(d[0],d[1]),y[l]=!0),a=v.pop(),c=f.pop(),_=g.pop(),o=e(i=t(s=(r+a)/2)),Object(p.g)(o[0],o[1],d[0],d[1],_[0],_[1])<n?(h.push(_[0],_[1]),y[l=a.toString()]=!0):(v.push(a,s,s,r),g.push(_,o,o,d),f.push(c,i,i,u));return h}var at=n(16),st=n(46),lt=n(35),ht=n(7),ut=n(91),ct=n(54);var pt=n(59),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_t=new A.a({color:"rgba(0,0,0,0.2)"}),ft=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],gt=function(t){function e(e){var n=this,i=e||{},o=Object(R.a)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},i);return delete o.maxLines,delete o.strokeStyle,delete o.targetSize,delete o.showLabels,delete o.lonLabelFormatter,delete o.latLabelFormatter,delete o.lonLabelPosition,delete o.latLabelPosition,delete o.lonLabelStyle,delete o.latLabelStyle,delete o.intervals,(n=t.call(this,o)||this).projection_=null,n.maxLat_=1/0,n.maxLon_=1/0,n.minLat_=-1/0,n.minLon_=-1/0,n.maxX_=1/0,n.maxY_=1/0,n.minX_=-1/0,n.minY_=-1/0,n.targetSize_=void 0!==i.targetSize?i.targetSize:100,n.maxLines_=void 0!==i.maxLines?i.maxLines:100,n.meridians_=[],n.parallels_=[],n.strokeStyle_=void 0!==i.strokeStyle?i.strokeStyle:_t,n.fromLonLatTransform_=void 0,n.toLonLatTransform_=void 0,n.projectionCenterLonLat_=null,n.bottomLeft_=null,n.bottomRight_=null,n.topLeft_=null,n.topRight_=null,n.meridiansLabels_=null,n.parallelsLabels_=null,i.showLabels&&(n.lonLabelFormatter_=null==i.lonLabelFormatter?L.b.bind(n,"EW"):i.lonLabelFormatter,n.latLabelFormatter_=null==i.latLabelFormatter?L.b.bind(n,"NS"):i.latLabelFormatter,n.lonLabelPosition_=null==i.lonLabelPosition?0:i.lonLabelPosition,n.latLabelPosition_=null==i.latLabelPosition?1:i.latLabelPosition,n.lonLabelStyleBase_=new ot.b({text:void 0!==i.lonLabelStyle?i.lonLabelStyle.clone():new I.a({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new T.a({color:"rgba(0,0,0,1)"}),stroke:new A.a({color:"rgba(255,255,255,1)",width:3})})}),n.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(n),n.latLabelStyleBase_=new ot.b({text:void 0!==i.latLabelStyle?i.latLabelStyle.clone():new I.a({font:"12px Calibri,sans-serif",textAlign:"right",fill:new T.a({color:"rgba(0,0,0,1)"}),stroke:new A.a({color:"rgba(255,255,255,1)",width:3})})}),n.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(n),n.meridiansLabels_=[],n.parallelsLabels_=[],n.addEventListener(pt.a.POSTRENDER,n.drawLabels_.bind(n))),n.intervals_=void 0!==i.intervals?i.intervals:ft,n.setSource(new it({loader:n.loaderFunction.bind(n),strategy:n.strategyFunction.bind(n),features:new r.a,overlaps:!1,useSpatialIndex:!1,wrapX:i.wrapX})),n.featurePool_=[],n.lineStyle_=new ot.b({stroke:n.strokeStyle_}),n.loadedExtent_=null,n.renderedExtent_=null,n.setRenderOrder(null),n}return dt(e,t),e.prototype.strategyFunction=function(t,e){var n=t.slice();return this.projection_&&this.getSource().getWrapX()&&Object(V.L)(n,this.projection_),this.loadedExtent_&&(Object(V.b)(this.loadedExtent_,n,e)?n=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[n]},e.prototype.loaderFunction=function(t,e,n){this.loadedExtent_=t;var i=this.getSource(),o=this.getExtent()||[-1/0,-1/0,1/0,1/0],r=Object(V.C)(o,t);if(!(this.renderedExtent_&&Object(V.q)(this.renderedExtent_,r)||(this.renderedExtent_=r,Object(V.I)(r)))){var a=Object(V.y)(r),l=e*e/4;(!this.projection_||!Object(d.c)(this.projection_,n))&&this.updateProjectionInfo_(n),this.createGraticule_(r,a,e,l);var h,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)h=new s.a,this.featurePool_.push(h);var c=i.getFeaturesCollection();c.clear();var p,_,f=0;for(p=0,_=this.meridians_.length;p<_;++p)(h=this.featurePool_[f++]).setGeometry(this.meridians_[p]),h.setStyle(this.lineStyle_),c.push(h);for(p=0,_=this.parallels_.length;p<_;++p)(h=this.featurePool_[f++]).setGeometry(this.parallels_[p]),h.setStyle(this.lineStyle_),c.push(h)}},e.prototype.addMeridian_=function(t,e,n,i,o,r){var a=this.getMeridian_(t,e,n,i,r);if(Object(V.G)(a.getExtent(),o)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);r in this.meridiansLabels_?this.meridiansLabels_[r].text=s:this.meridiansLabels_[r]={geom:new st.a([]),text:s}}this.meridians_[r++]=a}return r},e.prototype.addParallel_=function(t,e,n,i,o,r){var a=this.getParallel_(t,e,n,i,r);if(Object(V.G)(a.getExtent(),o)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);r in this.parallelsLabels_?this.parallelsLabels_[r].text=s:this.parallelsLabels_[r]={geom:new st.a([]),text:s}}this.parallels_[r++]=a}return r},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,n=t.frameState.extent,i=Object(V.y)(n),o=n;if(e){var r=Object(V.F)(n),a=Object(V.B)(n),s=Math.abs(Math.cos(e)),l=Math.abs(Math.sin(e)),h=(l*a-s*r)/(l*l-s*s),u=(l*r-s*a)/(l*l-s*s);o=[i[0]-h/2,i[1]-u/2,i[0]+h/2,i[1]+u/2]}var c=0,p=0,_=this.latLabelPosition_<.5,f=this.projection_.getExtent(),g=Object(V.F)(f);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(V.h)(f,n)&&(c=Math.floor((n[0]-f[0])/g),p=Math.ceil((n[2]-f[2])/g),_=_!==Math.abs(e)>Math.PI/2);for(var v=function(t){var e,n=t.frameState,i=Object(ht.f)(t.inversePixelTransform.slice(),n.coordinateToPixelTransform),o=Object(ct.b)(n.viewState.resolution,n.pixelRatio),r=Object(d.j)();return r&&(e=Object(d.i)(r,n.viewState.projection)),new ut.a(t.context,n.pixelRatio,n.extent,i,n.viewState.rotation,o,e)}(t),y=c;y<=p;++y){var m=this.meridians_.length+this.parallels_.length,b=void 0,E=void 0,O=void 0,x=void 0;if(this.meridiansLabels_)for(E=0,O=this.meridiansLabels_.length;E<O;++E){var w=this.meridians_[E];if(e||0!==y)(P=w.clone()).translate(y*g,0),P.rotate(-e,i),(x=this.getMeridianPoint_(P,o,E)).rotate(e,i);else x=this.getMeridianPoint_(w,n,E);(b=this.featurePool_[m++]).setGeometry(x),b.set("graticule_label",this.meridiansLabels_[E].text),v.drawFeature(b,this.lonLabelStyle_(b))}if(this.parallelsLabels_&&(y===c&&_||y===p&&!_))for(E=0,O=this.parallels_.length;E<O;++E){var P;w=this.parallels_[E];if(e||0!==y)(P=w.clone()).translate(y*g,0),P.rotate(-e,i),(x=this.getParallelPoint_(P,o,E)).rotate(e,i);else x=this.getParallelPoint_(w,n,E);(b=this.featurePool_[m++]).setGeometry(x),b.set("graticule_label",this.parallelsLabels_[E].text),v.drawFeature(b,this.latLabelStyle_(b))}}},e.prototype.createGraticule_=function(t,e,n,i){var o=this.getInterval_(n);if(-1==o)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var r=!1,a=this.projection_.getExtent(),s=Object(V.F)(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Object(V.h)(a,t)&&(Object(V.F)(t)>=s?(t[0]=a[0],t[2]=a[2]):r=!0);var l=[Object(p.a)(e[0],this.minX_,this.maxX_),Object(p.a)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(l);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var u,c,d,_,f=Object(p.a)(h[0],this.minLon_,this.maxLon_),g=Object(p.a)(h[1],this.minLat_,this.maxLat_),v=this.maxLines_,y=t;r||(y=[Object(p.a)(t[0],this.minX_,this.maxX_),Object(p.a)(t[1],this.minY_,this.maxY_),Object(p.a)(t[2],this.minX_,this.maxX_),Object(p.a)(t[3],this.minY_,this.maxY_)]);var m=Object(V.a)(y,this.toLonLatTransform_,void 0,8),b=m[3],E=m[2],O=m[1],x=m[0];if(r||(Object(V.g)(y,this.bottomLeft_)&&(x=this.minLon_,O=this.minLat_),Object(V.g)(y,this.bottomRight_)&&(E=this.maxLon_,O=this.minLat_),Object(V.g)(y,this.topLeft_)&&(x=this.minLon_,b=this.maxLat_),Object(V.g)(y,this.topRight_)&&(E=this.maxLon_,b=this.maxLat_),b=Object(p.a)(b,g,this.maxLat_),E=Object(p.a)(E,f,this.maxLon_),O=Object(p.a)(O,this.minLat_,g),x=Object(p.a)(x,this.minLon_,f)),f=Math.floor(f/o)*o,_=Object(p.a)(f,this.minLon_,this.maxLon_),c=this.addMeridian_(_,O,b,i,t,0),u=0,r)for(;(_-=o)>=x&&u++<v;)c=this.addMeridian_(_,O,b,i,t,c);else for(;_!=this.minLon_&&u++<v;)_=Math.max(_-o,this.minLon_),c=this.addMeridian_(_,O,b,i,t,c);if(_=Object(p.a)(f,this.minLon_,this.maxLon_),u=0,r)for(;(_+=o)<=E&&u++<v;)c=this.addMeridian_(_,O,b,i,t,c);else for(;_!=this.maxLon_&&u++<v;)_=Math.min(_+o,this.maxLon_),c=this.addMeridian_(_,O,b,i,t,c);for(this.meridians_.length=c,this.meridiansLabels_&&(this.meridiansLabels_.length=c),g=Math.floor(g/o)*o,d=Object(p.a)(g,this.minLat_,this.maxLat_),c=this.addParallel_(d,x,E,i,t,0),u=0;d!=this.minLat_&&u++<v;)d=Math.max(d-o,this.minLat_),c=this.addParallel_(d,x,E,i,t,c);for(d=Object(p.a)(g,this.minLat_,this.maxLat_),u=0;d!=this.maxLat_&&u++<v;)d=Math.min(d+o,this.maxLat_),c=this.addParallel_(d,x,E,i,t,c);this.parallels_.length=c,this.parallelsLabels_&&(this.parallelsLabels_.length=c)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1],i=-1,o=Math.pow(this.targetSize_*t,2),r=[],a=[],s=0,l=this.intervals_.length;s<l;++s){var h=Object(p.a)(this.intervals_[s]/2,0,90),u=Object(p.a)(n,-90+h,90-h);if(r[0]=e-h,r[1]=u-h,a[0]=e+h,a[1]=u+h,this.fromLonLatTransform_(r,r),this.fromLonLatTransform_(a,a),Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2)<=o)break;i=this.intervals_[s]}return i},e.prototype.getMeridian_=function(t,e,n,i,o){var r=function(t,e,n,i,o){var r=Object(d.f)("EPSG:4326");return rt((function(i){return[t,e+(n-e)*i]}),Object(d.h)(r,i),o)}(t,e,n,this.projection_,i),a=this.meridians_[o];return a?(a.setFlatCoordinates(at.a.XY,r),a.changed()):(a=new M.a(r,at.a.XY),this.meridians_[o]=a),a},e.prototype.getMeridianPoint_=function(t,e,n){var i=t.getFlatCoordinates(),o=1,r=i.length-1;i[o]>i[r]&&(o=r,r=1);var a=Math.max(e[1],i[o]),s=Math.min(e[3],i[r]),l=Object(p.a)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),h=[i[o-1]+(i[r-1]-i[o-1])*(l-i[o])/(i[r]-i[o]),l],u=this.meridiansLabels_[n].geom;return u.setCoordinates(h),u},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,n,i,o){var r=function(t,e,n,i,o){var r=Object(d.f)("EPSG:4326");return rt((function(i){return[e+(n-e)*i,t]}),Object(d.h)(r,i),o)}(t,e,n,this.projection_,i),a=this.parallels_[o];return a?(a.setFlatCoordinates(at.a.XY,r),a.changed()):a=new M.a(r,at.a.XY),a},e.prototype.getParallelPoint_=function(t,e,n){var i=t.getFlatCoordinates(),o=0,r=i.length-2;i[o]>i[r]&&(o=r,r=0);var a=Math.max(e[0],i[o]),s=Math.min(e[2],i[r]),l=Object(p.a)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),h=[l,i[o+1]+(i[r+1]-i[o+1])*(l-i[o])/(i[r]-i[o])],u=this.parallelsLabels_[n].geom;return u.setCoordinates(h),u},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=Object(d.f)("EPSG:4326"),n=t.getWorldExtent();this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0];var i=Object(d.h)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{var o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,n){for(var r=n||2,a=i(t,e,r),s=0,l=a.length;s<l;s+=r)a[s]<o&&(a[s]+=360);return a}}this.fromLonLatTransform_=Object(d.h)(e,t);var r=Object(V.a)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(V.y)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(j.a),vt=n(66),yt=n(80),mt=n(13),bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Et=function(t){function e(e,n,i,o,r){var a=this,s=void 0!==r?mt.a.IDLE:mt.a.LOADED;return(a=t.call(this,e,n,i,s)||this).loader_=void 0!==r?r:null,a.canvas_=o,a.error_=null,a}return bt(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=mt.a.ERROR):this.state=mt.a.LOADED,this.changed()},e.prototype.load=function(){this.state==mt.a.IDLE&&(this.state=mt.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(yt.a),Ot=n(83),xt=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var o=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/i,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pt=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.map=n,o.frameState=void 0!==i?i:null,o}return wt(e,t),e}(h.a),Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),jt=function(t){function e(e,n,i,o,r){var a=t.call(this,e,n,r)||this;return a.originalEvent=i,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==o&&o,a}return Ct(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Pt),Rt=(n(118),{SINGLECLICK:"singleclick",CLICK:u.a.CLICK,DBLCLICK:u.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}),Lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),It=function(t){function e(e,n,i,o,r){var a=t.call(this,e,n,i,o,r)||this;return a.pointerEvent=i,a}return Lt(e,t),e}(jt),Tt=n(34),At="pointermove",Mt="pointerdown",St=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ft=function(t){function e(e,n){var i=t.call(this,e)||this;i.map_=e,i.clickTimeoutId_,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n?n*lt.a:lt.a,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=Object(K.a)(o,Mt,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Object(K.a)(o,At,i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(u.a.TOUCHMOVE,i.boundHandleTouchMove_,!!lt.e&&{passive:!1}),i}return St(e,t),e.prototype.emulateClick_=function(t){var e=new It(Rt.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new It(Rt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new It(Rt.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Rt.POINTERUP||e.type==Rt.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Rt.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new It(Rt.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(K.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new It(Rt.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(Object(K.a)(document,Rt.POINTERMOVE,this.handlePointerMove_,this),Object(K.a)(document,Rt.POINTERUP,this.handlePointerUp_,this),Object(K.a)(this.element_,Rt.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new It(Rt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new It(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(K.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(u.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(K.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(K.c),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Tt.a),Dt=n(82),kt="layergroup",Nt="size",Kt="target",Vt="view",Gt=n(8),zt=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(R.b)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},t.prototype.enqueue=function(t){Object(N.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,o=e[t],r=n[t],a=t;t<i>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),h=l<i&&n[l]<n[s]?l:s;e[t]=e[h],n[t]=n[h],t=h}e[t]=o,n[t]=r,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,o=n[e],r=i[e];e>t;){var a=this.getParentIndex_(e);if(!(i[a]>r))break;n[e]=n[a],i[e]=i[a],e=a}n[e]=o,i[e]=r},t.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,o=this.elements_,r=this.priorities_,a=0,s=o.length;for(e=0;e<s;++e)(n=i(t=o[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(r[a]=n,o[a++]=t);o.length=a,r.length=a,this.heapify_()},t}(),Bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xt=function(t){function e(e,n){var i=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return Bt(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);n&&e[0].addEventListener(u.a.CHANGE,this.boundHandleTileChange_);return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(e.hifi&&n===Gt.a.LOADED||n===Gt.a.ERROR||n===Gt.a.EMPTY){e.removeEventListener(u.a.CHANGE,this.boundHandleTileChange_);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,o=0;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=(n=this.dequeue()[0]).getKey(),n.getState()!==Gt.a.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,n.load())},e}(zt);var Yt=n(61);function Zt(t,e,n){return function(i,o,r,a){if(i){var s=e?0:r[0]*o,l=e?0:r[1]*o,h=t[0]+s/2,u=t[2]-s/2,c=t[1]+l/2,d=t[3]-l/2;h>u&&(u=h=(u+h)/2),c>d&&(d=c=(d+c)/2);var _=Object(p.a)(i[0],h,u),f=Object(p.a)(i[1],c,d),g=30*o;return a&&n&&(_+=-g*Math.log(1+Math.max(0,h-i[0])/g)+g*Math.log(1+Math.max(0,i[0]-u)/g),f+=-g*Math.log(1+Math.max(0,c-i[1])/g)+g*Math.log(1+Math.max(0,i[1]-d)/g)),[_,f]}}}function Ht(t){return t}function Ut(t,e,n,i){var o=Object(V.F)(e)/n[0],r=Object(V.B)(e)/n[1];return i?Math.min(t,Math.max(o,r)):Math.min(t,Math.min(o,r))}function Wt(t,e,n){var i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Object(p.a)(i,n/2,2*e)}function qt(t,e,n,i,o){return function(r,a,s,l){if(void 0!==r){var h=i?Ut(t,i,s,o):t;return(void 0===n||n)&&l?Wt(r,h,e):Object(p.a)(r,e,h)}}}function Qt(t){return void 0!==t?0:void 0}function Jt(t){return void 0!==t?t:void 0}var $t=n(47),te="center",ee="resolution",ne="rotation",ie=n(49),oe=n(1),re=n(19),ae=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function se(t,e){setTimeout((function(){t(e)}),0)}function le(t){return!(t.sourceCenter&&t.targetCenter&&!Object(L.c)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var he=function(t){function e(e){var n=t.call(this)||this,i=Object(R.a)({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Object(d.b)(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.cancelAnchor_=void 0,i.center&&(i.center=Object(d.d)(i.center,n.projection_)),i.extent&&(i.extent=Object(d.e)(i.extent,n.projection_)),n.applyOptions_(i),n}return ae(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,i,o=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,u=Object(d.b)(t.projection,"EPSG:3857"),c=u.getExtent(),_=t.constrainOnlyCenter,f=t.extent;s||f||!u.isGlobal()||(_=!1,f=c);if(void 0!==t.resolutions){var g=t.resolutions;n=g[o],i=void 0!==g[r]?g[r]:g[g.length-1],e=t.constrainResolution?function(t,e,n,i){return function(o,r,a,s){if(void 0!==o){var l=t[0],h=t[t.length-1],u=n?Ut(l,n,a,i):l;if(s)return void 0===e||e?Wt(o,u,h):Object(p.a)(o,h,u);var c=Math.min(u,o),d=Math.floor(Object(k.h)(t,c,r));return t[d]>u&&d<t.length-1?t[d+1]:t[d]}}}(g,l,!_&&f,h):qt(n,i,l,!_&&f,h)}else{var v=(c?Math.max(Object(V.F)(c),Object(V.B)(c)):360*d.a[re.b.DEGREES]/u.getMetersPerUnit())/Yt.b/Math.pow(2,0),y=v/Math.pow(2,28);void 0!==(n=t.maxResolution)?o=0:n=v/Math.pow(a,o),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,r):v/Math.pow(a,r):y),r=o+Math.floor(Math.log(n/i)/Math.log(a)),i=n/Math.pow(a,r-o),e=t.constrainResolution?function(t,e,n,i,o,r){return function(a,s,l,h){if(void 0!==a){var u=o?Ut(e,o,l,r):e,c=void 0!==n?n:0;if(h)return void 0===i||i?Wt(a,u,c):Object(p.a)(a,c,u);var d=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),_=-s*(.5-1e-9)+.5,f=Math.min(u,a),g=Math.floor(Math.log(e/f)/Math.log(t)+_),v=Math.max(d,g),y=e/Math.pow(t,v);return Object(p.a)(y,c,u)}}}(a,n,i,l,!_&&f,h):qt(n,i,l,!_&&f,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Zt(t.extent,t.constrainOnlyCenter,e)}var n=Object(d.b)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var i=n.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Zt(i,!1,!1)}return Ht}(t),i=e.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(r=o||Object(p.i)(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=r?0:t:void 0}):!1===e?Jt:"number"==typeof e?(n=e,i=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/i+.5)*i:void 0}):Jt}return Qt;var n,i;var o,r}(t);this.constraints_={center:n,resolution:i,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(R.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object(R.a)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var i=arguments[n];i.center&&((i=Object(R.a)({},i)).center=Object(d.d)(i.center,this.getProjection())),i.anchor&&((i=Object(R.a)({},i)).anchor=Object(d.d)(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var i=arguments[n-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&se(e,!0))}for(var o=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,l=[],h=0;h<n;++h){var u=arguments[h],c={start:o,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||ie.c,callback:e};if(u.center&&(c.sourceCenter=r,c.targetCenter=u.center.slice(),r=c.targetCenter),void 0!==u.zoom?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(u.zoom),a=c.targetResolution):u.resolution&&(c.sourceResolution=a,c.targetResolution=u.resolution,a=c.targetResolution),void 0!==u.rotation){c.sourceRotation=s;var d=Object(p.d)(u.rotation-s+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=s+d,s=c.targetRotation}le(c)?c.complete=!0:o+=c.duration,l.push(c)}this.animations_.push(l),this.setHint($t.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[$t.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[$t.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint($t.a.ANIMATING,-this.hints_[$t.a.ANIMATING]);for(var e=0,n=this.animations_.length;e<n;++e){var i=this.animations_[e];if(i[0].callback&&se(i[0].callback,!1),!t)for(var o=0,r=i.length;o<r;++o){var a=i[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],o=!0,r=0,a=i.length;r<a;++r){var s=i[r];if(!s.complete){var l=t-s.start,h=s.duration>0?l/s.duration:1;h>=1?(s.complete=!0,h=1):o=!1;var u=s.easing(h);if(s.sourceCenter){var c=s.sourceCenter[0],d=s.sourceCenter[1],_=c+u*(s.targetCenter[0]-c),f=d+u*(s.targetCenter[1]-d);this.targetCenter_=[_,f]}if(s.sourceResolution&&s.targetResolution){var g=1===u?s.targetResolution:s.sourceResolution+u*(s.targetResolution-s.sourceResolution);if(s.anchor){var v=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(g,0,v,!0);this.targetCenter_=this.calculateCenterZoom(y,s.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var m=1===u?Object(p.d)(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+u*(s.targetRotation-s.sourceRotation);if(s.anchor){var b=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(b,s.anchor)}this.targetRotation_=m}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(o){this.animations_[n]=null,this.setHint($t.a.ANIMATING,-1);var E=i[0].callback;E&&se(E,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Object(L.d)(n,t-this.getRotation()),Object(L.a)(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenterInternal(),o=this.getResolution();void 0!==i&&void 0!==o&&(n=[e[0]-t*(e[0]-i[0])/o,e[1]-t*(e[1]-i[1])/o]);return n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Object(d.l)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(te)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return Object(d.m)(e,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),n=this.getCenterInternal();Object(N.a)(n,1);var i=this.getResolution();Object(N.a)(void 0!==i,2);var o=this.getRotation();return Object(N.a)(void 0!==o,3),Object(V.A)(n,i,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(ee)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Object(d.e)(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSize_(),i=Object(V.F)(t)/n[0],o=Object(V.B)(t)/n[1];return Math.max(i,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(n/i)/Math.log(e);return function(t){return n/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get(ne)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/o}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var o=Object(k.h)(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Object(p.a)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Object(p.a)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n,i=Object(R.a)({size:this.getViewportSize_()},e||{});if(Object(N.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Object(N.a)(!Object(V.I)(t),25);var o=Object(d.e)(t,this.getProjection());n=Object(c.c)(o)}else if(t.getType()===oe.a.CIRCLE){o=Object(d.e)(t.getExtent(),this.getProjection());(n=Object(c.c)(o)).rotate(this.getRotation(),Object(V.y)(o))}else{var r=Object(d.j)();n=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(n,i)},e.prototype.fitInternal=function(t,e){var n=e||{},i=n.size;i||(i=this.getViewportSize_());var o,r=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;o=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var s=t.getFlatCoordinates(),l=this.getRotation(),h=Math.cos(-l),u=Math.sin(-l),c=1/0,p=1/0,d=-1/0,_=-1/0,f=t.getStride(),g=0,v=s.length;g<v;g+=f){var y=s[g]*h-s[g+1]*u,m=s[g]*u+s[g+1]*h;c=Math.min(c,y),p=Math.min(p,m),d=Math.max(d,y),_=Math.max(_,m)}var b=this.getResolutionForExtentInternal([c,p,d,_],[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);b=isNaN(b)?o:Math.max(b,o),b=this.getConstrainedResolution(b,a?0:1),u=-u;var E=(c+d)/2,O=(p+_)/2,x=[(E+=(r[1]-r[3])/2*b)*h-(O+=(r[0]-r[2])/2*b)*u,O*h+E*u],w=n.callback?n.callback:G.c;void 0!==n.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(x,b),duration:n.duration,easing:n.easing},w):(this.targetResolution_=b,this.targetCenter_=x,this.applyTargetState_(!1,!0),se(w,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Object(d.d)(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){var i=this.getRotation(),o=Math.cos(-i),r=Math.sin(-i),a=t[0]*o-t[1]*r,s=t[1]*o+t[0]*r,l=this.getResolution(),h=(a+=(e[0]/2-n[0])*l)*o-(s+=(n[1]-e[1]/2)*l)*(r=-r),u=s*o+a*r;this.setCenterInternal([h,u])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Object(d.l)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Object(d.d)(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Object(d.d)(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Object(d.d)(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),o=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,o,n),a=this.constraints_.center(this.targetCenter_,r,o,n);this.get(ne)!==i&&this.set(ne,i),this.get(ee)!==r&&this.set(ee,r),this.get(te)&&Object(L.c)(this.get(te),a)||this.set(te,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var i=void 0!==t?t:200,o=e||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,o,a),l=this.constraints_.center(this.targetCenter_,s,a);if(0===i&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var h=n||(0===i?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&Object(L.c)(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:s,duration:i,easing:ie.b,anchor:h}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint($t.a.INTERACTING,1)},e.prototype.endInteraction=function(t,e,n){var i=n&&Object(d.d)(n,this.getProjection());this.endInteractionInternal(t,e,i)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint($t.a.INTERACTING,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)},e}(l.a),ue=n(15),ce=n(87),pe=n(31),de=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var _e=function(t){function e(e){var n=t.call(this)||this,i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,o,a={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ce.a({layers:t.layers});a[kt]=s,a[Kt]=t.target,a[Vt]=void 0!==t.view?t.view:new he,void 0!==t.controls&&(Array.isArray(t.controls)?n=new r.a(t.controls.slice()):(Object(N.a)("function"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new r.a(t.interactions.slice()):(Object(N.a)("function"==typeof t.interactions.getArray,48),i=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new r.a(t.overlays.slice()):(Object(N.a)("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new r.a;return{controls:n,interactions:i,keyboardEventTarget:e,overlays:o,values:a}}(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:lt.a,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Object(ht.c)(),n.pixelToCoordinateTransform_=Object(ht.c)(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=new Ft(n,e.moveTolerance);var o=n.handleMapBrowserEvent.bind(n);for(var a in Rt)n.mapBrowserEventHandler_.addEventListener(Rt[a],o);n.keyboardEventTarget_=i.keyboardEventTarget,n.keyHandlerKeys_=null;var s=n.handleBrowserEvent.bind(n);return n.viewport_.addEventListener(u.a.CONTEXTMENU,s,!1),n.viewport_.addEventListener(u.a.WHEEL,s,!!lt.e&&{passive:!1}),n.controls=i.controls||new r.a,n.interactions=i.interactions||new r.a,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new Xt(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addEventListener(Object(l.b)(kt),n.handleLayerGroupChanged_),n.addEventListener(Object(l.b)(Vt),n.handleViewChanged_),n.addEventListener(Object(l.b)(Nt),n.handleSizeChanged_),n.addEventListener(Object(l.b)(Kt),n.handleTargetChanged_),n.setProperties(i.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(F.a.ADD,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(F.a.REMOVE,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(F.a.ADD,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(F.a.REMOVE,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(F.a.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(F.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return de(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(u.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(u.a.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(u.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixelInternal(t),o=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,r=void 0!==n.layerFilter?n.layerFilter:G.b,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,o,a,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{},o=void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,r=i.layerFilter||G.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:G.b,o=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,o,r,i,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Kt)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Object(d.l)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Object(ht.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(kt)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer.getSource();if(i&&i.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Object(d.d)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Object(ht.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Nt)},e.prototype.getView=function(){return this.get(Vt)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,i){return function(t,e,n,i,o){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;var r=t.viewState.center,a=i[0]-r[0],s=i[1]-r[1];return 65536*Math.log(o)+Math.sqrt(a*a+s*s)/o}(this.frameState_,t,e,n,i)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,i=new jt(n,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=n.length-1;i>=0;i--){var o=n[i];if(o.getActive())if(!o.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var o=t.viewHints;if(o[$t.a.ANIMATING]||o[$t.a.INTERACTING]){var r=!lt.c&&Date.now()-t.time>8;n=r?0:8,i=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}!t||!this.hasListener(pt.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(pt.a.RENDERCOMPLETE,t);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)Object(K.c)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(K.a)(i,u.a.KEYDOWN,this.handleBrowserEvent,this),Object(K.a)(i,u.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(u.a.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),Object(ue.e)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(u.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(K.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(K.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(K.a)(t,D.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(K.a)(t,u.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(K.c),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(K.a)(t,D.a.PROPERTYCHANGE,this.render,this),Object(K.a)(t,u.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),n=this.getView(),i=this.frameState_,o=null;if(void 0!==e&&Object(pe.a)(e)&&n&&n.isDef()){var r=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:i?i.declutterItems:[],extent:Object(V.A)(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:r,wantedTiles:{}}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i)(!this.previousExtent_||!Object(V.I)(this.previousExtent_)&&!Object(V.q)(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Pt(Dt.a.MOVESTART,this,i)),this.previousExtent_=Object(V.m)(this.previousExtent_));this.previousExtent_&&!o.viewHints[$t.a.ANIMATING]&&!o.viewHints[$t.a.INTERACTING]&&!Object(V.q)(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Pt(Dt.a.MOVEEND,this,o)),Object(V.e)(o.extent,this.previousExtent_))}this.dispatchEvent(new Pt(Dt.a.POSTRENDER,this,o)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(kt,t)},e.prototype.setSize=function(t){this.set(Nt,t)},e.prototype.setTarget=function(t){this.set(Kt,t)},e.prototype.setView=function(t){this.set(Vt,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(l.a),fe=n(94),ge="active",ve=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function ye(t,e,n,i){var o=t.getZoom();if(void 0!==o){var r=t.getConstrainedZoom(o+e),a=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:ie.b})}}var me=function(t){function e(e){var n=t.call(this)||this;return e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return ve(e,t),e.prototype.getActive=function(){return this.get(ge)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(ge,t)},e.prototype.setMap=function(t){this.map_=t},e}(l.a),be=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Ee(t){var e=!1;if(t.type==Rt.DBLCLICK){var n=t.originalEvent,i=t.map,o=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_;ye(i.getView(),r,o,this.duration_),t.preventDefault(),e=!0}return!e}var Oe=function(t){function e(e){var n=t.call(this,{handleEvent:Ee})||this,i=e||{};return n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:250,n}return be(e,t),e}(me),xe=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},we=function(t){return t.target.getTargetElement()===document.activeElement},Pe=G.b,Ce=function(t){var e=t.originalEvent;return 0==e.button&&!(lt.f&&lt.d&&e.ctrlKey)},je=(G.a,function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),Re=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Le=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Ie=function(t){var e=t.pointerEvent;return Object(N.a)(void 0!==e,56),"mouse"==e.pointerType},Te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Ae(t){for(var e=t.length,n=0,i=0,o=0;o<e;o++)n+=t[o].clientX,i+=t[o].clientY;return[n/e,i/e]}var Me=function(t){function e(e){var n=this,i=e||{};return n=t.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return Te(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Rt.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Rt.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Rt.POINTERDOWN){var i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Rt.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Rt.POINTERDOWN||e===Rt.POINTERDRAG||e===Rt.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==Rt.POINTERUP?delete this.trackedPointers_[n]:(t.type==Rt.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Object(R.c)(this.trackedPointers_)}},e}(me),Se=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Fe(t){return je(t)&&function(t){var e=t.pointerEvent;return Object(N.a)(void 0!==e,56),e.isPrimary&&0===e.button}(t)}var De=function(t){function e(e){var n=t.call(this,{stopDown:G.a})||this,i=e||{};return n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1,n.condition_=i.condition?i.condition:Fe,n.noKinetic_=!1,n}return Se(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=we(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=Ae(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],o=t.map.getView();Object(L.e)(i,o.getResolution()),Object(L.d)(i,o.getRotation()),o.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),r=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([a[0]-i*Math.cos(o),a[1]-i*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:ie.b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Me),ke=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ne=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,{stopDown:G.a})||this).condition_=i.condition?i.condition:xe,n.lastAngle_=void 0,n.duration_=void 0!==i.duration?i.duration:250,n}return ke(e,t),e.prototype.handleDragEvent=function(t){if(Ie(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Qt){var i=e.getSize(),o=t.pixel,r=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(void 0!==this.lastAngle_){var a=r-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!Ie(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!Ie(t)&&(!(!Ce(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(Me),Ke=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ve=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ke(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new c.b([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(a.a),Ge=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ze="boxstart",Be="boxdrag",Xe="boxend",Ye=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return Ge(e,t),e}(h.a),Ze=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.box_=new Ve(i.className||"ol-dragbox"),n.minArea_=void 0!==i.minArea?i.minArea:64,n.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:G.c,n.startPixel_=null,n.condition_=i.condition?i.condition:Ce,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return Ge(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],o=n[1]-e[1];return i*i+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ye(Be,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Ye(Xe,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ye(ze,t.coordinate,t)),!0)},e}(Me),He=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Ue(){var t=this.getMap(),e=t.getView(),n=t.getSize(),i=this.getGeometry().getExtent();if(this.out_){var o=e.calculateExtentInternal(n),r=Object(V.o)([t.getPixelFromCoordinateInternal(Object(V.w)(i)),t.getPixelFromCoordinateInternal(Object(V.E)(i))]),a=e.getResolutionForExtentInternal(r,n);Object(V.K)(o,1/a),i=o}var s=e.getConstrainedResolution(e.getResolutionForExtentInternal(i,n)),l=e.getConstrainedCenter(Object(V.y)(i),s);e.animateInternal({resolution:s,center:l,duration:this.duration_,easing:ie.b})}var We=function(t){function e(e){var n=this,i=e||{},o=i.condition?i.condition:Re;return(n=t.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea,onBoxEnd:Ue})||this).duration_=void 0!==i.duration?i.duration:200,n.out_=void 0!==i.out&&i.out,n}return He(e,t),e}(Ze),qe=37,Qe=38,Je=39,$e=40,tn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function en(t){var e=!1;if(t.type==u.a.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==$e||n==qe||n==Je||n==Qe)){var i=t.map.getView(),o=i.getResolution()*this.pixelDelta_,r=0,a=0;n==$e?a=-o:n==qe?r=-o:n==Je?r=o:a=o;var s=[r,a];Object(L.d)(s,i.getRotation()),function(t,e,n){var i=t.getCenterInternal();if(i){var o=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:ie.d,center:t.getConstrainedCenter(o)})}}(i,s,this.duration_),t.preventDefault(),e=!0}}return!e}var nn=function(t){function e(e){var n=t.call(this,{handleEvent:en})||this,i=e||{};return n.defaultCondition_=function(t){return je(t)&&Le(t)},n.condition_=void 0!==i.condition?i.condition:n.defaultCondition_,n.duration_=void 0!==i.duration?i.duration:100,n.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128,n}return tn(e,t),e}(me),on=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function rn(t){var e=!1;if(t.type==u.a.KEYDOWN||t.type==u.a.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_;ye(i.getView(),o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var an=function(t){function e(e){var n=t.call(this,{handleEvent:rn})||this,i=e||{};return n.condition_=i.condition?i.condition:Le,n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:100,n}return on(e,t),e}(me),sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ln="trackpad",hn="wheel",un=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,i)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,n.duration_=void 0!==i.duration?i.duration:250,n.timeout_=void 0!==i.timeout?i.timeout:80,n.useAnchor_=void 0===i.useAnchor||i.useAnchor,n.condition_=i.condition?i.condition:Pe,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return sn(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=we(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==u.a.WHEEL)return!0;t.preventDefault();var e,n=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==u.a.WHEEL&&(e=i.deltaY,lt.b&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=lt.a),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?ln:hn);var r=n.getView();if(this.mode_===ln&&!r.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Object(p.a)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(n=n?n>0?1:-1:0),ye(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(me),cn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pn=function(t){function e(e){var n=this,i=e||{},o=i;return o.stopDown||(o.stopDown=G.a),(n=t.call(this,o)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==i.threshold?i.threshold:.3,n.duration_=void 0!==i.duration?i.duration:250,n}return cn(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=o-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=o;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Qt){var l=a.getViewport().getBoundingClientRect(),h=Ae(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(h),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Me),dn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_n=function(t){function e(e){var n=this,i=e||{},o=i;return o.stopDown||(o.stopDown=G.a),(n=t.call(this,o)||this).anchor_=null,n.duration_=void 0!==i.duration?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return dn(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],o=n.clientX-i.clientX,r=n.clientY-i.clientY,a=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,l=s.getView();1!=e&&(this.lastScaleDelta_=e);var h=s.getViewport().getBoundingClientRect(),u=Ae(this.targetPointers);u[0]-=h.left,u[1]-=h.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Me);var fn=n(20),gn=n(50),vn=n(88),yn=n(76),mn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function bn(t,e){yn.a.expire()}var En=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n.declutterTree_=null,n}return mn(e,t),e.prototype.dispatchRenderEvent=function(t,e){Object(S.b)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Object(ht.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(ht.d)(i,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,o,r,a,s){var l,h=e.viewState;function u(t,e,n){return o.call(r,e,t?n:null)}var c=h.projection,p=Object(L.f)(t.slice(),c),d=[[0,0]];if(c.canWrapX()&&i){var _=c.getExtent(),f=Object(V.F)(_);d.push([-f,0],[f,0])}var g,v=e.layerStatesArray,y=v.length;this.declutterTree_&&(g=this.declutterTree_.all().map((function(t){return t.value})));for(var m=[],b=0;b<d.length;b++)for(var E=y-1;E>=0;--E){var O=v[E],x=O.layer;if(x.hasRenderer()&&Object(gn.b)(O,h)&&a.call(s,x)){var w=x.getRenderer(),P=x.getSource();if(w&&P){var C=P.getWrapX()?p:t,j=u.bind(null,O.managed);m[0]=C[0]+d[b][0],m[1]=C[1]+d[b][1],l=w.forEachFeatureAtCoordinate(m,e,n,j,g)}if(l)return l}}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,o){return Object(S.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,o,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,G.b,this,o,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=function(t,e){e&&e.clear();for(var n=t.declutterItems,i=n.length-1;i>=0;--i)for(var o=n[i],r=o.items,a=0,s=r.length;a<s;a+=3)e=r[a].renderDeclutter(r[a+1],r[a+2],o.opacity,e);return n.length=0,e}(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){yn.a.canExpireCache()&&t.postRenderFunctions.push(bn)},e}(a.a),On=n(3),xn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),wn=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=Object(K.a)(On.a,D.a.PROPERTYCHANGE,e.redrawText.bind(e)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=fn.e+" ol-layers";var o=e.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return xn(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var i=new vn.a(t,void 0,e);n.dispatchEvent(i)}},e.prototype.disposeInternal=function(){Object(K.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(pt.a.PRECOMPOSE,e);var n=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=e.viewState;this.children_.length=0;for(var o=null,r=0,a=n.length;r<a;++r){var s=n[r];if(e.layerIndex=r,Object(gn.b)(s,i)&&(s.sourceState==H.a.READY||s.sourceState==H.a.UNDEFINED)){var l=s.layer.render(e,o);l&&l!==o&&(this.children_.push(l),o=l)}}t.prototype.renderFrame.call(this,e),Object(ue.f)(this.element_,this.children_),this.dispatchRenderEvent(pt.a.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,o){for(var r=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],h=l.layer;if(h.hasRenderer()&&Object(gn.b)(l,r)&&o(h)){var u=h.getRenderer().getDataAtPixel(t,e,n);if(u){var c=i(h,u);if(c)return c}}}},e}(En),Pn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Cn=function(t){function e(e){return(e=Object(R.a)({},e)).controls||(e.controls=Object(fe.a)()),e.interactions||(e.interactions=function(t){var e=t||{},n=new r.a,i=new xt(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Ne),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Oe({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new De({condition:e.onFocusOnly?we:void 0,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new pn),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new _n({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new nn),n.push(new an({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new un({condition:e.onFocusOnly?we:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new We({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return Pn(e,t),e.prototype.createRenderer=function(){return new wn(this)},e}(_e),jn=n(58),Rn="bottom-left",Ln="bottom-center",In="bottom-right",Tn="center-left",An="center-center",Mn="center-right",Sn="top-left",Fn="top-center",Dn="top-right",kn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nn="element",Kn="map",Vn="offset",Gn="position",zn="positioning",Bn=function(t){function e(e){var n=t.call(this)||this;n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+fn.d,n.element.style.position="absolute";var i=e.autoPan;return i&&"object"!=typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=i||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addEventListener(Object(l.b)(Nn),n.handleElementChanged),n.addEventListener(Object(l.b)(Kn),n.handleMapChanged),n.addEventListener(Object(l.b)(Vn),n.handleOffsetChanged),n.addEventListener(Object(l.b)(Gn),n.handlePositionChanged),n.addEventListener(Object(l.b)(zn),n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:Sn),void 0!==e.position&&n.setPosition(e.position),n}return kn(e,t),e.prototype.getElement=function(){return this.get(Nn)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Kn)},e.prototype.getOffset=function(){return this.get(Vn)},e.prototype.getPosition=function(){return this.get(Gn)},e.prototype.getPositioning=function(){return this.get(zn)},e.prototype.handleElementChanged=function(){Object(ue.d)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(ue.e)(this.element),Object(K.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(K.a)(t,Dt.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Nn,t)},e.prototype.setMap=function(t){this.set(Kn,t)},e.prototype.setOffset=function(t){this.set(Vn,t)},e.prototype.setPosition=function(t){this.set(Gn,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Gn)){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),o=this.getRect(i,[Object(ue.c)(i),Object(ue.b)(i)]),r=void 0===t.margin?20:t.margin;if(!Object(V.h)(n,o)){var a=o[0]-n[0],s=n[2]-o[2],l=o[1]-n[1],h=n[3]-o[3],u=[0,0];if(a<0?u[0]=a-r:s<0&&(u[0]=Math.abs(s)+r),l<0?u[1]=l-r:h<0&&(u[1]=Math.abs(h)+r),0!==u[0]||0!==u[1]){var c=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(c),d=[p[0]+u[0],p[1]+u[1]],_=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:_.duration,easing:_.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(zn,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+i[0])+"px",a=Math.round(t[1]+i[1])+"px",s="0%",l="0%";o==In||o==Mn||o==Dn?s="-100%":o!=Ln&&o!=An&&o!=Fn||(s="-50%"),o==Rn||o==Ln||o==In?l="-100%":o!=Tn&&o!=An&&o!=Mn||(l="-50%");var h="translate("+s+", "+l+") translate("+r+", "+a+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h,n.msTransform=h)},e.prototype.getOptions=function(){return this.options},e}(l.a),Xn=n(64),Yn=n(67),Zn=n(44),Hn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Un=[],Wn=function(t){function e(e,n,i,o){var r=t.call(this,e,n,{transition:0})||this;return r.context_={},r.executorGroups={},r.loadingSourceTiles=0,r.errorSourceTileKeys={},r.hitDetectionImageData={},r.replayState_={},r.sourceTiles=null,r.wantedResolution,r.getSourceTiles=o.bind(void 0,r),r.sourceZ=-1,r.hifi=!1,r.wrappedTileCoord=i,r}return Hn(e,t),e.prototype.getContext=function(t){var e=Object(S.c)(t);return e in this.context_||(this.context_[e]=Object(ue.a)(1,1,Un)),this.context_[e]},e.prototype.hasContext=function(t){return Object(S.c)(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=Object(S.c)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)Un.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(Xn.a),qn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qn=function(t){function e(e,n,i,o,r,a){var s=t.call(this,e,n,a)||this;return s.extent=null,s.format_=o,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=r,s.url_=i,s}return qn(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==Gt.a.IDLE&&(this.setState(Gt.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(Gt.a.ERROR)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(Gt.a.LOADED)},e.prototype.setLoader=function(t){this.loader_=t},e}(Xn.a)}}]);